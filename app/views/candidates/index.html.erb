<meta name="viewport" content="width=device-width, initial-scale=1.0">

<% content_for :title do 'YourCandidates.org.uk - '+  @constituencyName end %>

<%= render partial: "header" %>

<div class="visible-xs-block">
  <!-- Begin Navbar -->
  <div class="navbar-wrapper">
    <div id="nav-xs">
      <div class="navbar">
	<ul style="float: left;" class="nav navbar-nav navbar-left">
	  <li><p id="topmenutext" class="navbar-text">Personal links</p></li>
	</ul>
	<ul style="float: right;" class="nav navbar-nav navbar-right">
	  <li class="dropdown">
	  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Choose comparison <span class="caret"></span></a>
	  <ul class="dropdown-menu" role="menu">
	    <li><a href="javascript: $('#personalTab').tab('show'); $('#topmenutext').text('Personal links')">Personal links</a></li>
	    <li><a href="javascript: $('#nhsTab').tab('show'); $('#topmenutext').text('The NHS');">The NHS</a></li>
	    <li><a href="javascript: $('#economyTab').tab('show'); $('#topmenutext').text('Economy and taxes');">Economy and taxes</a></li>
	    <li><a href="javascript: $('#immigrationTab').tab('show'); $('#topmenutext').text('Immigration');">Immigration</a></li>
	    <li><a href="javascript: $('#benefitsTab').tab('show'); $('#topmenutext').text('Benefits and pensions');">Benefits and pensions</a></li>
	    <li><a href="javascript: $('#lawTab').tab('show'); $('#topmenutext').text('Rights and crime');">Rights and crime</a></li>
	    <li><a href="javascript: $('#twitterTab').click()">Candidate twitter feeds</a></li>
	  </ul>
	  </li>
	</ul>
      </div><!-- /.navbar -->
    </div>
  </div>
</div> <!-- visible-xs-block -->

<div class="container index-maincontainer">
  <div class="row" style="margin-bottom: 10px;">
    <div id="header-container">
      <p style="text-align: right; margin: 10px 10px 0px 0px;"><strong>Parliamentary election May 2015</strong></p>
      <h1 id="constituency-header">Candidates for <%= @constituencyName %></h1>
    </div>
  </div>

<script>
  jQuery("#constituency-header").fitText(1.6, {maxFontSize: '48px'});
</script>

  <div class="row">
    <!-- XXX this is the basis I think, before it was col-md-3 -->
    <div class="col-lg-3 col-md-4 col-sm-6 col-xs-12">
  
      <div class="hidden-xs">
        <ul class="nav nav-pills nav-stacked">
  	<li role="presentation" class="active"><a id="personalTab" href="#personalInfo" aria-controls="home" role="tab" data-toggle="tab">Personal links</a></li>
  	<li role="presentation"><a id="nhsTab" href="#nhs" aria-controls="home" role="tab" data-toggle="tab">The NHS</a></li>
  	<li role="presentation"><a id="economyTab" href="#economy" aria-controls="home" role="tab" data-toggle="tab">Economy and taxes</a></li>
  	<li role="presentation"><a id="immigrationTab" href="#immigration" aria-controls="home" role="tab" data-toggle="tab">Immigration</a></li>
  	<li role="presentation"><a id="benefitsTab" href="#benefits" aria-controls="home" role="tab" data-toggle="tab">Benefits and pensions</a></li>
  	<li role="presentation"><a id="lawTab" href="#lawandorder" aria-controls="home" role="tab" data-toggle="tab">Rights and crime</a></li>
  	<!--        <li role="presentation"><a href="#environment" aria-controls="home" role="tab" data-toggle="tab">Environment</a></li> -->
  	<li role="presentation" style="padding-left: 15px; padding-top: 8px;">Environment - coming soon</li>
  	<li role="presentation" style="padding-top: 8px;" id="twitterTab" class="fake-link"><a><i class="fa fa-angle-double-down"></i> Candidate twitter feeds</a></li>
        </ul>
      </div> <!-- hidden-xs -->
  
      <script>
        $('li.fake-link').on('click', function() {
  	$.smoothScroll({
  	  scrollTarget: '#twitter',
  	  offset: -30
  	});
        });
      </script>
  
    </div>
  
    <%-# First candidate block, showing personal links -%>
    <div class="tab-content">
      <div role="tabpanel" class="tab-pane fade in active" id="personalInfo">
        <div class="col-lg-9 col-md-8 col-sm-6 col-xs-12">
          <div class="row">
            <% @candidates.each_with_index do |c, i| %>
              <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                <div class="listbox"> 
                  <%= render partial: "box_header", :locals => { :c => c } %>
  
                  <% if not c['isEmpty'] %>
                    <%= render partial: "personal", :locals => { :c => c } %>
                  <% else %>
  
                    <p class="candidate-content-index">
                    There is no information about this candidate in the database yet. You can help by <a target="_blank" href="https://yournextmp.com" class="candidate-link-index">contributing to the database</a> yourself.
                    </p>
  
                  <% end %>
  
                </div> <!-- /listbox -->
              </div> <!-- /col-lg.. -->
  
              <%= render partial: "clearfix", :locals => { :i => i } %>
  
            <% end %> <!-- //@candidates loop -->
          </div> <!-- /row -->
        </div> <!-- col-lg.. -->
      </div> <!-- tab-pane -->

    <!-- NHS -->
  
      <div role="tabpanel" class="tab-pane fade" id="nhs">
        <div class="col-lg-9 col-md-8 col-sm-6 col-xs-12">
          <div class="row">
            <% @candidates.each_with_index do |c, i| %>
            <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
              <div class="listbox"> 
                <%= render partial: "box_header", :locals => { :c => c } %>
                <p class="candidate-content-index">
  
                Party policy: <%= render partial: "party_policy", :locals => { :c => c, :policy_area => 'The NHS', :policies => @policies[c['id'].to_s]['The NHS'] } %>
                </p>
  
              </div>
            </div>

            <%= render partial: "clearfix", :locals => { :i => i } %>

            <% end %> <!-- //@candidates loop -->
          </div> <!-- /row -->
        </div> <!-- col-lg.. -->
      </div> <!-- tab-pane -->
  
  <!-- UK Economy -->
  
      <div role="tabpanel" class="tab-pane fade" id="economy">
        <div class="col-lg-9 col-md-8 col-sm-6 col-xs-12">
          <div class="row">
            <% @candidates.each_with_index do |c, i| %>
            <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
              <div class="listbox"> 
                <%= render partial: "box_header", :locals => { :c => c } %>
                <p class="candidate-content-index">
    
                Party policy: <%= render partial: "party_policy", :locals => { :c => c, :policy_area => 'Economy and taxes', :policies => @policies[c['id'].to_s]['Economy and taxes'] } %>
                </p>
              </div>
            </div>
    
            <%= render partial: "clearfix", :locals => { :i => i } %>
    
            <% end %> <!-- //@candidates loop -->
          </div> <!-- /row -->
        </div> <!-- col-lg.. -->
      </div> <!-- tab-pane -->
  
  <!-- Immigration -->
  
      <div role="tabpanel" class="tab-pane fade" id="immigration">
        <div class="col-lg-9 col-md-8 col-sm-6 col-xs-12">
          <div class="row">
            <% @candidates.each_with_index do |c, i| %>
            <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
              <div class="listbox"> 
                <%= render partial: "box_header", :locals => { :c => c } %>
    
                <p class="candidate-content-index">
                Party policy: <%= render partial: "party_policy", :locals => { :c => c, :policy_area => 'Immigration', :policies => @policies[c['id'].to_s]['Immigration'] } %>
                </p>
              </div>
            </div>
    
            <%= render partial: "clearfix", :locals => { :i => i } %>
    
            <% end %> <!-- //@candidates loop -->
          </div> <!-- /row -->
        </div> <!-- col-lg.. -->
      </div> <!-- tab-pane -->
  
  <!-- Benefits and pensions -->
  
      <div role="tabpanel" class="tab-pane fade" id="benefits">
        <div class="col-lg-9 col-md-8 col-sm-6 col-xs-12">
          <div class="row">
            <% @candidates.each_with_index do |c, i| %>
            <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
              <div class="listbox"> 
                <%= render partial: "box_header", :locals => { :c => c } %>
    
                <p class="candidate-content-index">
                Party policy: <%= render partial: "party_policy", :locals => { :c => c, :policy_area => 'Benefits and pensions', :policies => @policies[c['id'].to_s]['Benefits and pensions'] } %>
                </p>
              </div>
            </div>
    
            <%= render partial: "clearfix", :locals => { :i => i } %>
    
            <% end %> <!-- //@candidates loop -->
          </div> <!-- /row -->
        </div> <!-- col-lg.. -->
      </div> <!-- tab-pane -->
  
  <!-- Europe -->
  
      <div role="tabpanel" class="tab-pane fade" id="lawandorder">
        <div class="col-lg-9 col-md-8 col-sm-6 col-xs-12">
          <div class="row">
            <% @candidates.each_with_index do |c, i| %>
            <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
              <div class="listbox"> 
                <%= render partial: "box_header", :locals => { :c => c } %>
    
                <p class="candidate-content-index">
                Party policy: <%= render partial: "party_policy", :locals => { :c => c, :policy_area => 'Law and order', :policies => @policies[c['id'].to_s]['Law and order'] } %>
                </p>
    
              </div>
            </div>
    
            <%= render partial: "clearfix", :locals => { :i => i } %>
    
            <% end %> <!-- //@candidates loop -->
          </div> <!-- /row -->
        </div> <!-- col-lg.. -->
      </div> <!-- tab-pane -->
  
  <!-- Environment -->
  
      <div role="tabpanel" class="tab-pane fade" id="environment">
        <div class="col-lg-9 col-md-8 col-sm-6 col-xs-12">
          <div class="row">
            <% @candidates.each_with_index do |c, i| %>
            <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
              <div class="listbox"> 
                <%= render partial: "box_header", :locals => { :c => c } %>
    
                <p class="candidate-content-index">
                <%= @policies[c['id'].to_s]['Environment'] %>
                </p>
              </div>
            </div>
    
            <%= render partial: "clearfix", :locals => { :i => i } %>
    
            <% end %> <!-- //@candidates loop -->
          </div> <!-- /row -->
        </div> <!-- col-lg.. -->
      </div> <!-- tab-pane -->
    </div>
  </div>
</div>

</ul>
<% if @twitter_list %>
<a name="#twitter" id="twitter" class="anchor-destination">
<div class="twitter-section" style="z-index: -1;">
  <div class="container">
    <div class="row">
      <div class="col-md-4">
        <h1>
        There are <%= @twitter_count %> candidates in your area using Twitter. See their latest updates here.
        </h1>
      </div>
      <div class="col-md-offset-2 col-md-6">
        <div style="height: 605px;">
          <a class="twitter-timeline" href="https://twitter.com/TwittElection/lists/motherwell-and-wishaw" data-widget-id="563093058695487490" data-list-owner-screen-name="twittelection" data-list-slug="<%= @twitter_list %>"></a>
          <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
	  <h3 id="twitter-error" style="position: relative; display: none;">The Twitter feeds may not load if you are using products such as Adblock on your browser. You can see all the tweets from the candidates on <a href="https://twitter.com/TwittElection/<%= @twitter_count %>">on this page</a>.</p>
        </div>
      </div>
    </div>
  </div>
</div>
</a>
<% end %>

<script>
twttr.widgets.load();
</script>

<div class="social-section">
  <div class="container">
    <div class="row">
      <div class="col-md-4">

        <h1>
This election is too important for you to be a bystander. Challenge your friends to get informed, by sharing with these links.
        </h1>

      </div>
      <div class="col-md-offset-2 col-md-6">

        <div class="social-container">
                <div class="sharing-links">
  <span class="fa-stack fa-lg" style="font-size: 50px;">
    <i class="fa fa-circle fa-stack-2x"></i>
    <a href="#" data-type="twitter" data-url="http://yourcandidates.org.uk" data-via="UKcandidates" data-description="I just used the first UK website that shows my candidates for UK parliament. Do you know yours?" class="prettySocial fa fa-twitter fa-stack-1x fa-inverse"></a>
   </span>
  <span class="fa-stack fa-lg" style="font-size: 50px;">
    <i class="fa fa-circle fa-stack-2x"></i>
    <a href="#" data-type="facebook" data-url="http://www.yourcandidates.org.uk" data-title="" data-description="" data-media="" class="prettySocial fa fa-facebook fa-stack-1x fa-inverse"></a>
                </div>

                <script type="text/javascript" class="source">
                        $('.prettySocial').prettySocial();
                </script>
        </div>

      </div>
    </div>
  </div>

</div>

<%= render partial: "footer" %>

<script>
$(document).ready(function(){
$('#nav-xs').affix({
      offset: {
        top: $('#nav-xs').offset().top,
        bottom: $( document ).height()-( $('.twitter-section').offset().top)+($('#nav-xs').outerHeight() - $('#nav-xs').height())
      }
});
});
$(window).load(function(){
  if (! $('#twitter-widget-0').is(':visible')) { $('#twitter-error').css('display','block'); }
});
</script>
